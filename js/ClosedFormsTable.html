<script>
  "use strict";
  /* global HTML Utility */
  /* exported ClosedFormsTable */
  function ClosedFormsTable({ forms, onSort, setForm }) {
    const {
      cell,
      createElement,
      documentIcon,
      row,
      headerCell,
      table,
      tableBody,
      tableHead,
    } = HTML;
    const { uncamelCase } = Utility;

    return table(
      tableHead({
        class: "archive",
        child: row(
          headerCell({ child: documentIcon() }),
          ...[
            "startTime",
            "endTime",
            "location",
            "students",
            "items",
            "bookingId",
            "bookedStudents",
            "contact",
            "project",
            "tape",
            "overnight",
          ].map((text) =>
            headerCell({
              textContent: uncamelCase(text),
              onClick: () => onSort(text),
            })
          )
        ),
      }),
      tableBody({
        class: "closedFormsList",
        children: forms.length
          ? forms.map((form) =>
              createElement("tr", {
                onClick: () =>
                  setForm({ form, type: "closed", filteredForms: forms }),
                children: [
                  cell({ child: documentIcon() }),
                  ...[
                    form.startTime,
                    form.endTime,
                    form.location,
                    form.students.map((student) => student.name).join(", "),
                    form.items.length ? "YES" : "NO", // "has items"
                    form.bookingId,
                    form.bookedStudents,
                    form.contact,
                    form.project,
                    form.tape ? "YES" : "",
                    form.overnight ? "YES" : "",
                  ].map(cell),
                ],
              })
            )
          : [
              createElement("tr", {
                class: "hoverOff",
                child: createElement("td", {
                  textContent: "No forms matched your search.",
                  colspan: 12, // fill entire row
                }),
              }),
            ],
      })
    );
  }
</script>
