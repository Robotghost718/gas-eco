<script>
  /* global HTML Utility */
  /* exported ModalManualEntry */
  function ModalManualEntry({ onSubmit }) {
    const { createElement, modal } = HTML;
    const { digestMessage, hexString } = Utility;
    const input = createElement("input", { type: "text" });
    modal({
      children: [
        HTML.heading1("Check out item without barcode"),
        HTML.paragraph(
          "Describe the item: (required, provide as much detail as possible)"
        ),
        input,
      ],
      okText: "Check out",
      onOk: () => {
        const description = input.value;
        if (description === "") {
          return;
        }
        digestMessage(description).then((hash) =>
          onSubmit({
            id: `MANUAL-${hexString(hash).substring(0, 5)}`,
            checkIn: null,
            checkOut: null,
            quantity: 1,
            serialized: false,
            barcode: null,
            description,
            checkedOut: false,
            notes: "",
            missing: false,
          })
        );
      },
    });
    input.focus();
  }
</script>
