<script>
  /* global HTML */
  /* exported ModalNewCodabar */
  function ModalNewCodabar({ codabar, roster, onSubmit }) {
    const { createElement, heading1, paragraph, modal } = HTML;
    const input = createElement("input", {
      value: "codabar",
      placeholder: "enter student's NetID",
    });
    modal({
      children: [
        heading1("ID not recognized"),
        paragraph(
          "If you scanned an ID, add it to the student's info by " +
            "submitting their NetID.  If you think you are seeing this " +
            'message in error, choose "close".'
        ),
        input,
      ],
      okText: "Submit",
      onOk: () => {
        const netId = input.value;
        const student = roster.find(
          (student) => student.netId.toLowerCase() === netId
        );
        if (!student) {
          return window.alert(
            "Hmmm, NetID " +
              netId +
              " does not match a current student. " +
              "Check that it was entered correctly, try refreshing the browser, " +
              "or submit a trouble report."
          );
        }
        //handlers.onNewCodabar({ netId, codabar: value });
        onSubmit({ netId, codabar });
      },
    });
    input.focus();
  }
</script>
